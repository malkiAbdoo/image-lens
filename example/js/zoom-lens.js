!function(Q,U){"object"==typeof exports&&"object"==typeof module?module.exports=U():"function"==typeof define&&define.amd?define([],U):"object"==typeof exports?exports["zoom-lens"]=U():Q["zoom-lens"]=U()}(self,(()=>(()=>{"use strict";var __webpack_modules__={607:(__unused_webpack_module,exports,__webpack_require__)=>{eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst lens_resize_1 = __webpack_require__(48);\r\nconst zoom_window_1 = __webpack_require__(577);\r\nclass zoomLens {\r\n    constructor(image, options = {}) {\r\n        this._lens = {};\r\n        const body = document.body;\r\n        const lens = document.createElement('div');\r\n        const originZoom = (options.originZoom || false) && !options.zoomWindow;\r\n        const background = `url(${image.src}) no-repeat`;\r\n        lens.style.position = originZoom ? 'absolute' : 'fixed';\r\n        lens.style.pointerEvents = 'none';\r\n        lens.style.zIndex = '999';\r\n        lens.classList.add(options.className || 'zoom-lens');\r\n        this._image = image;\r\n        this._lens.div = lens;\r\n        this._lens.origin = originZoom;\r\n        body.appendChild(lens);\r\n        const lensStyle = window.getComputedStyle(lens);\r\n        if (originZoom) {\r\n            options.lensWidth = 100;\r\n            options.lensHeight = 100;\r\n        }\r\n        (0, lens_resize_1.resize)(this._lens.div, this._image, options.lensWidth || options.lensHeight || null, options.lensHeight || null);\r\n        if (options.zoomWindow) {\r\n            this._lens.window = (0, zoom_window_1.createZoomWindow)(this._lens.div, this._image);\r\n            this._lens.window.style.background = background;\r\n            if (lensStyle.backgroundColor == 'rgba(0, 0, 0, 0)') {\r\n                lens.style.background = '#FFF6';\r\n            }\r\n            const windowRect = this._lens.window.getBoundingClientRect();\r\n            const lensRect = this._lens.div.getBoundingClientRect();\r\n            this._lens.zoomRatio = windowRect.width / lensRect.width;\r\n            this._lens.zoomRect = {\r\n                width: lensRect.width,\r\n                height: lensRect.height\r\n            };\r\n        }\r\n        else {\r\n            this.zoom(options.zoomRatio || 2);\r\n            lens.style.background = background;\r\n        }\r\n        this.hide();\r\n        this.setBgSize();\r\n        image.addEventListener('mousemove', e => this.updateOnMove(e));\r\n        image.addEventListener('mouseenter', () => this.show());\r\n        image.addEventListener('mouseleave', () => this.hide());\r\n        window.addEventListener('scroll', () => this.updateOnScroll());\r\n        window.addEventListener('resize', () => this.setBgSize());\r\n    }\r\n    setBgSize() {\r\n        const lens = this._lens.window ? this._lens.window : this._lens.div;\r\n        const ratio = this._lens.zoomRatio;\r\n        const bgw = this._image.width * ratio;\r\n        const bgh = this._image.height * ratio;\r\n        this._lens.div.style.top = this._image.offsetTop + 'px';\r\n        this._lens.div.style.left = this._image.offsetLeft + 'px';\r\n        if (this._lens.origin) {\r\n            lens.style.width = this._image.width + 'px';\r\n            lens.style.height = this._image.height + 'px';\r\n            this.zoom(ratio);\r\n        }\r\n        lens.style.backgroundSize = bgw + 'px ' + bgh + 'px';\r\n    }\r\n    setBgPosition(x, y) {\r\n        const lens = this._lens.window ? this._lens.window : this._lens.div;\r\n        lens.style.backgroundPosition = '-' + x + 'px -' + y + 'px';\r\n    }\r\n    updateOnScroll() {\r\n        const prevPos = this._lens.prevPosition;\r\n        if (prevPos == null)\r\n            return;\r\n        const ratio = this._lens.zoomRatio;\r\n        const zoomRect = this._lens.zoomRect;\r\n        const scrollX = window.scrollX - prevPos.sx;\r\n        const scrollY = window.scrollY - prevPos.sy;\r\n        let x = prevPos.px + scrollX;\r\n        let y = prevPos.py + scrollY;\r\n        const maxX = this._image.width - zoomRect.width;\r\n        const maxY = this._image.height - zoomRect.height;\r\n        if (x <= 0)\r\n            x = 0;\r\n        else if (x >= maxX)\r\n            x = maxX;\r\n        if (y <= 0)\r\n            y = 0;\r\n        else if (y >= maxY)\r\n            y = maxY;\r\n        this.setBgPosition(x * ratio, y * ratio);\r\n    }\r\n    updateOnMove(event) {\r\n        const origin = this._lens.origin;\r\n        const posX = event.pageX - (origin ? 0 : window.scrollX);\r\n        const posY = event.pageY - (origin ? 0 : window.scrollY);\r\n        const zoomRect = this._lens.zoomRect;\r\n        const imageRect = this._image.getBoundingClientRect();\r\n        const lensRect = this._lens.div.getBoundingClientRect();\r\n        const ratio = this._lens.zoomRatio;\r\n        let x = posX - imageRect.left - zoomRect.width / 2;\r\n        let y = posY - imageRect.top - zoomRect.height / 2;\r\n        let maxX = imageRect.width - zoomRect.width;\r\n        let maxY = imageRect.height - zoomRect.height;\r\n        if (x <= 0)\r\n            x = 0;\r\n        else if (x >= maxX)\r\n            x = maxX;\r\n        if (y <= 0)\r\n            y = 0;\r\n        else if (y >= maxY)\r\n            y = maxY;\r\n        this.setBgPosition(x * ratio, y * ratio);\r\n        maxX = imageRect.width - lensRect.width;\r\n        maxY = imageRect.height - lensRect.height;\r\n        let lensX = x + zoomRect.width / 2 - lensRect.width / 2;\r\n        let lensY = y + zoomRect.height / 2 - lensRect.height / 2;\r\n        if (lensX <= 0)\r\n            lensX = 0;\r\n        else if (lensX >= maxX)\r\n            lensX = maxX;\r\n        if (lensY <= 0)\r\n            lensY = 0;\r\n        else if (lensY >= maxY)\r\n            lensY = maxY;\r\n        this._lens.prevPosition = {\r\n            px: x,\r\n            py: y,\r\n            sx: window.scrollX,\r\n            sy: window.scrollY\r\n        };\r\n        if (!this._lens.origin) {\r\n            this._lens.div.style.left = lensX + imageRect.left + 'px';\r\n            this._lens.div.style.top = lensY + imageRect.top + 'px';\r\n        }\r\n    }\r\n    zoom(ratio) {\r\n        if (this._lens.window)\r\n            return;\r\n        const rect = this._lens.div.getBoundingClientRect();\r\n        this._lens.zoomRatio = ratio <= 0 ? 0.01 : ratio;\r\n        ratio = this._lens.zoomRatio;\r\n        this._lens.zoomRect = {\r\n            width: rect.width / ratio,\r\n            height: rect.height / ratio\r\n        };\r\n        this.updateOnScroll();\r\n    }\r\n    setLensSize(width, height = 0) {\r\n        if (!width || this._lens.origin)\r\n            return;\r\n        const zoomWindow = this._lens.window;\r\n        const ratio = zoomWindow ? 1 : this._lens.zoomRatio;\r\n        const lens = this._lens.div;\r\n        const image = this._image;\r\n        (0, lens_resize_1.resize)(lens, image, width, height);\r\n        const lensRect = lens.getBoundingClientRect();\r\n        if (zoomWindow) {\r\n            const windowWidth = window.getComputedStyle(zoomWindow).width;\r\n            zoomWindow.style.aspectRatio = lensRect.width + '/' + lensRect.height;\r\n            this._lens.zoomRatio = +windowWidth.replace('px', '') / lensRect.width;\r\n        }\r\n        this._lens.zoomRect = {\r\n            width: lensRect.width / ratio,\r\n            height: lensRect.height / ratio\r\n        };\r\n        this.setBgSize();\r\n    }\r\n    show() {\r\n        this._lens.div.style.zIndex = '999';\r\n        if (this._lens.window)\r\n            this._lens.window.style.display = 'block';\r\n    }\r\n    hide() {\r\n        this._lens.div.style.zIndex = '-1';\r\n        if (this._lens.window)\r\n            this._lens.window.style.display = 'none';\r\n    }\r\n    remove() {\r\n        this._lens.div.remove();\r\n        if (this._lens.window)\r\n            this._lens.window.remove();\r\n    }\r\n}\r\nexports[\"default\"] = zoomLens;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDcEQsQ0FBQztDQUNGO0FBL0xELDhCQStMQyIsInNvdXJjZXMiOlsid2VicGFjazovL3pvb20tbGVucy8uL3NyYy9pbmRleC50cz9mZmI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExlbnMgfSBmcm9tICcuL3R5cGVzJztcclxuaW1wb3J0IHsgSW1nLCBPcHRpb25zIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IHJlc2l6ZSB9IGZyb20gJy4vc2NyaXB0cy9sZW5zLXJlc2l6ZSc7XHJcbmltcG9ydCB7IGNyZWF0ZVpvb21XaW5kb3cgfSBmcm9tICcuL3NjcmlwdHMvem9vbS13aW5kb3cnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mgem9vbUxlbnMge1xyXG4gIHByaXZhdGUgX2xlbnM6IFBhcnRpYWw8TGVucz4gPSB7fTtcclxuICBwcml2YXRlIF9pbWFnZTogSW1nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihpbWFnZTogSW1nLCBvcHRpb25zOiBQYXJ0aWFsPE9wdGlvbnM+ID0ge30pIHtcclxuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xyXG4gICAgY29uc3QgbGVucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3Qgb3JpZ2luWm9vbSA9IChvcHRpb25zLm9yaWdpblpvb20gfHwgZmFsc2UpICYmICFvcHRpb25zLnpvb21XaW5kb3c7XHJcbiAgICBjb25zdCBiYWNrZ3JvdW5kID0gYHVybCgke2ltYWdlLnNyY30pIG5vLXJlcGVhdGA7XHJcbiAgICBsZW5zLnN0eWxlLnBvc2l0aW9uID0gb3JpZ2luWm9vbSA/ICdhYnNvbHV0ZScgOiAnZml4ZWQnO1xyXG4gICAgbGVucy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xyXG4gICAgbGVucy5zdHlsZS56SW5kZXggPSAnOTk5JztcclxuICAgIGxlbnMuY2xhc3NMaXN0LmFkZChvcHRpb25zLmNsYXNzTmFtZSB8fCAnem9vbS1sZW5zJyk7XHJcblxyXG4gICAgdGhpcy5faW1hZ2UgPSBpbWFnZTtcclxuICAgIHRoaXMuX2xlbnMuZGl2ID0gbGVucztcclxuICAgIHRoaXMuX2xlbnMub3JpZ2luID0gb3JpZ2luWm9vbTtcclxuICAgIGJvZHkuYXBwZW5kQ2hpbGQobGVucyk7XHJcblxyXG4gICAgLy8gc3R5bGluZ1xyXG4gICAgY29uc3QgbGVuc1N0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobGVucyk7XHJcbiAgICBpZiAob3JpZ2luWm9vbSkge1xyXG4gICAgICBvcHRpb25zLmxlbnNXaWR0aCA9IDEwMDtcclxuICAgICAgb3B0aW9ucy5sZW5zSGVpZ2h0ID0gMTAwO1xyXG4gICAgfVxyXG4gICAgcmVzaXplKFxyXG4gICAgICB0aGlzLl9sZW5zLmRpdixcclxuICAgICAgdGhpcy5faW1hZ2UsXHJcbiAgICAgIG9wdGlvbnMubGVuc1dpZHRoIHx8IG9wdGlvbnMubGVuc0hlaWdodCB8fCBudWxsLFxyXG4gICAgICBvcHRpb25zLmxlbnNIZWlnaHQgfHwgbnVsbFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAob3B0aW9ucy56b29tV2luZG93KSB7XHJcbiAgICAgIHRoaXMuX2xlbnMud2luZG93ID0gY3JlYXRlWm9vbVdpbmRvdyh0aGlzLl9sZW5zLmRpdiwgdGhpcy5faW1hZ2UpO1xyXG4gICAgICB0aGlzLl9sZW5zLndpbmRvdy5zdHlsZS5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcclxuICAgICAgaWYgKGxlbnNTdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPT0gJ3JnYmEoMCwgMCwgMCwgMCknKSB7XHJcbiAgICAgICAgbGVucy5zdHlsZS5iYWNrZ3JvdW5kID0gJyNGRkY2JztcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgd2luZG93UmVjdCA9IHRoaXMuX2xlbnMud2luZG93LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBjb25zdCBsZW5zUmVjdCA9IHRoaXMuX2xlbnMuZGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICB0aGlzLl9sZW5zLnpvb21SYXRpbyA9IHdpbmRvd1JlY3Qud2lkdGggLyBsZW5zUmVjdC53aWR0aDtcclxuICAgICAgdGhpcy5fbGVucy56b29tUmVjdCA9IHtcclxuICAgICAgICB3aWR0aDogbGVuc1JlY3Qud2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiBsZW5zUmVjdC5oZWlnaHRcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuem9vbShvcHRpb25zLnpvb21SYXRpbyB8fCAyKTtcclxuICAgICAgbGVucy5zdHlsZS5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcclxuICAgIH1cclxuICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgdGhpcy5zZXRCZ1NpemUoKTtcclxuXHJcbiAgICAvLyBFdmVudCBsaXN0ZW5lcnNcclxuICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGUgPT4gdGhpcy51cGRhdGVPbk1vdmUoZSkpO1xyXG4gICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHRoaXMuc2hvdygpKTtcclxuICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB0aGlzLmhpZGUoKSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4gdGhpcy51cGRhdGVPblNjcm9sbCgpKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB0aGlzLnNldEJnU2l6ZSgpKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0QmdTaXplKCkge1xyXG4gICAgY29uc3QgbGVucyA9IHRoaXMuX2xlbnMud2luZG93ID8gdGhpcy5fbGVucy53aW5kb3cgOiB0aGlzLl9sZW5zLmRpdiE7XHJcbiAgICBjb25zdCByYXRpbyA9IHRoaXMuX2xlbnMuem9vbVJhdGlvITtcclxuICAgIGNvbnN0IGJndyA9IHRoaXMuX2ltYWdlLndpZHRoICogcmF0aW87XHJcbiAgICBjb25zdCBiZ2ggPSB0aGlzLl9pbWFnZS5oZWlnaHQgKiByYXRpbztcclxuICAgIHRoaXMuX2xlbnMuZGl2IS5zdHlsZS50b3AgPSB0aGlzLl9pbWFnZS5vZmZzZXRUb3AgKyAncHgnO1xyXG4gICAgdGhpcy5fbGVucy5kaXYhLnN0eWxlLmxlZnQgPSB0aGlzLl9pbWFnZS5vZmZzZXRMZWZ0ICsgJ3B4JztcclxuICAgIGlmICh0aGlzLl9sZW5zLm9yaWdpbikge1xyXG4gICAgICBsZW5zLnN0eWxlLndpZHRoID0gdGhpcy5faW1hZ2Uud2lkdGggKyAncHgnO1xyXG4gICAgICBsZW5zLnN0eWxlLmhlaWdodCA9IHRoaXMuX2ltYWdlLmhlaWdodCArICdweCc7XHJcbiAgICAgIHRoaXMuem9vbShyYXRpbyk7XHJcbiAgICB9XHJcblxyXG4gICAgbGVucy5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9IGJndyArICdweCAnICsgYmdoICsgJ3B4JztcclxuICB9XHJcbiAgcHJpdmF0ZSBzZXRCZ1Bvc2l0aW9uKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBsZW5zID0gdGhpcy5fbGVucy53aW5kb3cgPyB0aGlzLl9sZW5zLndpbmRvdyA6IHRoaXMuX2xlbnMuZGl2ITtcclxuICAgIGxlbnMuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gJy0nICsgeCArICdweCAtJyArIHkgKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgLy8gY2hhbmdlIHRoZSBiYWNrZ3JvdW5kIHBvc2l0aW9uIG9uIHNjcm9sbFxyXG4gIHByaXZhdGUgdXBkYXRlT25TY3JvbGwoKSB7XHJcbiAgICBjb25zdCBwcmV2UG9zID0gdGhpcy5fbGVucy5wcmV2UG9zaXRpb247XHJcblxyXG4gICAgaWYgKHByZXZQb3MgPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgY29uc3QgcmF0aW8gPSB0aGlzLl9sZW5zLnpvb21SYXRpbyE7XHJcbiAgICBjb25zdCB6b29tUmVjdCA9IHRoaXMuX2xlbnMuem9vbVJlY3QhO1xyXG4gICAgY29uc3Qgc2Nyb2xsWCA9IHdpbmRvdy5zY3JvbGxYIC0gcHJldlBvcy5zeDtcclxuICAgIGNvbnN0IHNjcm9sbFkgPSB3aW5kb3cuc2Nyb2xsWSAtIHByZXZQb3Muc3k7XHJcbiAgICBsZXQgeCA9IHByZXZQb3MucHggKyBzY3JvbGxYO1xyXG4gICAgbGV0IHkgPSBwcmV2UG9zLnB5ICsgc2Nyb2xsWTtcclxuXHJcbiAgICBjb25zdCBtYXhYID0gdGhpcy5faW1hZ2Uud2lkdGggLSB6b29tUmVjdC53aWR0aDtcclxuICAgIGNvbnN0IG1heFkgPSB0aGlzLl9pbWFnZS5oZWlnaHQgLSB6b29tUmVjdC5oZWlnaHQ7XHJcbiAgICBpZiAoeCA8PSAwKSB4ID0gMDtcclxuICAgIGVsc2UgaWYgKHggPj0gbWF4WCkgeCA9IG1heFg7XHJcbiAgICBpZiAoeSA8PSAwKSB5ID0gMDtcclxuICAgIGVsc2UgaWYgKHkgPj0gbWF4WSkgeSA9IG1heFk7XHJcblxyXG4gICAgdGhpcy5zZXRCZ1Bvc2l0aW9uKHggKiByYXRpbywgeSAqIHJhdGlvKTtcclxuICB9XHJcblxyXG4gIC8vIGNoYW5nZSB0aGUgYmFja2dyb3VuZCBwb3NpdGlvbiBvbiBtb3VzZSBtb3ZlXHJcbiAgcHJpdmF0ZSB1cGRhdGVPbk1vdmUoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgIGNvbnN0IG9yaWdpbiA9IHRoaXMuX2xlbnMub3JpZ2luO1xyXG4gICAgY29uc3QgcG9zWCA9IGV2ZW50LnBhZ2VYIC0gKG9yaWdpbiA/IDAgOiB3aW5kb3cuc2Nyb2xsWCk7XHJcbiAgICBjb25zdCBwb3NZID0gZXZlbnQucGFnZVkgLSAob3JpZ2luID8gMCA6IHdpbmRvdy5zY3JvbGxZKTtcclxuICAgIGNvbnN0IHpvb21SZWN0ID0gdGhpcy5fbGVucy56b29tUmVjdCE7XHJcbiAgICBjb25zdCBpbWFnZVJlY3QgPSB0aGlzLl9pbWFnZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IGxlbnNSZWN0ID0gdGhpcy5fbGVucy5kaXYhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgY29uc3QgcmF0aW8gPSB0aGlzLl9sZW5zLnpvb21SYXRpbyE7XHJcbiAgICBsZXQgeCA9IHBvc1ggLSBpbWFnZVJlY3QubGVmdCAtIHpvb21SZWN0LndpZHRoIC8gMjtcclxuICAgIGxldCB5ID0gcG9zWSAtIGltYWdlUmVjdC50b3AgLSB6b29tUmVjdC5oZWlnaHQgLyAyO1xyXG5cclxuICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBiYWNrZ3JvdW5kIHBvc2l0aW9uIGRvZXNuJ3QgZ2V0IG92ZXIgdGhlIGltYWdlXHJcbiAgICBsZXQgbWF4WCA9IGltYWdlUmVjdC53aWR0aCAtIHpvb21SZWN0LndpZHRoO1xyXG4gICAgbGV0IG1heFkgPSBpbWFnZVJlY3QuaGVpZ2h0IC0gem9vbVJlY3QuaGVpZ2h0O1xyXG4gICAgaWYgKHggPD0gMCkgeCA9IDA7XHJcbiAgICBlbHNlIGlmICh4ID49IG1heFgpIHggPSBtYXhYO1xyXG4gICAgaWYgKHkgPD0gMCkgeSA9IDA7XHJcbiAgICBlbHNlIGlmICh5ID49IG1heFkpIHkgPSBtYXhZO1xyXG5cclxuICAgIHRoaXMuc2V0QmdQb3NpdGlvbih4ICogcmF0aW8sIHkgKiByYXRpbyk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRpbmcgdGhlIGxlbnMgcG9zaXRpb25cclxuICAgIG1heFggPSBpbWFnZVJlY3Qud2lkdGggLSBsZW5zUmVjdC53aWR0aDtcclxuICAgIG1heFkgPSBpbWFnZVJlY3QuaGVpZ2h0IC0gbGVuc1JlY3QuaGVpZ2h0O1xyXG4gICAgbGV0IGxlbnNYID0geCArIHpvb21SZWN0LndpZHRoIC8gMiAtIGxlbnNSZWN0LndpZHRoIC8gMjtcclxuICAgIGxldCBsZW5zWSA9IHkgKyB6b29tUmVjdC5oZWlnaHQgLyAyIC0gbGVuc1JlY3QuaGVpZ2h0IC8gMjtcclxuICAgIGlmIChsZW5zWCA8PSAwKSBsZW5zWCA9IDA7XHJcbiAgICBlbHNlIGlmIChsZW5zWCA+PSBtYXhYKSBsZW5zWCA9IG1heFg7XHJcbiAgICBpZiAobGVuc1kgPD0gMCkgbGVuc1kgPSAwO1xyXG4gICAgZWxzZSBpZiAobGVuc1kgPj0gbWF4WSkgbGVuc1kgPSBtYXhZO1xyXG5cclxuICAgIHRoaXMuX2xlbnMucHJldlBvc2l0aW9uID0ge1xyXG4gICAgICBweDogeCxcclxuICAgICAgcHk6IHksXHJcbiAgICAgIHN4OiB3aW5kb3cuc2Nyb2xsWCxcclxuICAgICAgc3k6IHdpbmRvdy5zY3JvbGxZXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICghdGhpcy5fbGVucy5vcmlnaW4pIHtcclxuICAgICAgdGhpcy5fbGVucy5kaXYhLnN0eWxlLmxlZnQgPSBsZW5zWCArIGltYWdlUmVjdC5sZWZ0ICsgJ3B4JztcclxuICAgICAgdGhpcy5fbGVucy5kaXYhLnN0eWxlLnRvcCA9IGxlbnNZICsgaW1hZ2VSZWN0LnRvcCArICdweCc7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHpvb20ocmF0aW86IG51bWJlcikge1xyXG4gICAgaWYgKHRoaXMuX2xlbnMud2luZG93KSByZXR1cm47XHJcbiAgICBjb25zdCByZWN0ID0gdGhpcy5fbGVucy5kaXYhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgdGhpcy5fbGVucy56b29tUmF0aW8gPSByYXRpbyA8PSAwID8gMC4wMSA6IHJhdGlvO1xyXG4gICAgcmF0aW8gPSB0aGlzLl9sZW5zLnpvb21SYXRpbztcclxuICAgIHRoaXMuX2xlbnMuem9vbVJlY3QgPSB7XHJcbiAgICAgIHdpZHRoOiByZWN0LndpZHRoIC8gcmF0aW8sXHJcbiAgICAgIGhlaWdodDogcmVjdC5oZWlnaHQgLyByYXRpb1xyXG4gICAgfTtcclxuICAgIHRoaXMudXBkYXRlT25TY3JvbGwoKTtcclxuICB9XHJcblxyXG4gIHNldExlbnNTaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodCA9IDApIHtcclxuICAgIGlmICghd2lkdGggfHwgdGhpcy5fbGVucy5vcmlnaW4pIHJldHVybjtcclxuICAgIGNvbnN0IHpvb21XaW5kb3cgPSB0aGlzLl9sZW5zLndpbmRvdztcclxuICAgIGNvbnN0IHJhdGlvID0gem9vbVdpbmRvdyA/IDEgOiB0aGlzLl9sZW5zLnpvb21SYXRpbyE7XHJcbiAgICBjb25zdCBsZW5zID0gdGhpcy5fbGVucy5kaXYhO1xyXG4gICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9pbWFnZTtcclxuICAgIHJlc2l6ZShsZW5zLCBpbWFnZSwgd2lkdGgsIGhlaWdodCk7XHJcblxyXG4gICAgY29uc3QgbGVuc1JlY3QgPSBsZW5zLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgaWYgKHpvb21XaW5kb3cpIHtcclxuICAgICAgY29uc3Qgd2luZG93V2lkdGggPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh6b29tV2luZG93KS53aWR0aDtcclxuICAgICAgem9vbVdpbmRvdy5zdHlsZS5hc3BlY3RSYXRpbyA9IGxlbnNSZWN0LndpZHRoICsgJy8nICsgbGVuc1JlY3QuaGVpZ2h0O1xyXG4gICAgICB0aGlzLl9sZW5zLnpvb21SYXRpbyA9ICt3aW5kb3dXaWR0aC5yZXBsYWNlKCdweCcsICcnKSAvIGxlbnNSZWN0LndpZHRoO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fbGVucy56b29tUmVjdCA9IHtcclxuICAgICAgd2lkdGg6IGxlbnNSZWN0LndpZHRoIC8gcmF0aW8sXHJcbiAgICAgIGhlaWdodDogbGVuc1JlY3QuaGVpZ2h0IC8gcmF0aW9cclxuICAgIH07XHJcbiAgICB0aGlzLnNldEJnU2l6ZSgpO1xyXG4gIH1cclxuICBzaG93KCkge1xyXG4gICAgdGhpcy5fbGVucy5kaXYhLnN0eWxlLnpJbmRleCA9ICc5OTknO1xyXG4gICAgaWYgKHRoaXMuX2xlbnMud2luZG93KSB0aGlzLl9sZW5zLndpbmRvdy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICB9XHJcbiAgaGlkZSgpIHtcclxuICAgIHRoaXMuX2xlbnMuZGl2IS5zdHlsZS56SW5kZXggPSAnLTEnO1xyXG4gICAgaWYgKHRoaXMuX2xlbnMud2luZG93KSB0aGlzLl9sZW5zLndpbmRvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gIH1cclxuICByZW1vdmUoKSB7XHJcbiAgICB0aGlzLl9sZW5zLmRpdiEucmVtb3ZlKCk7XHJcbiAgICBpZiAodGhpcy5fbGVucy53aW5kb3cpIHRoaXMuX2xlbnMud2luZG93LnJlbW92ZSgpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///607\n")},48:(__unused_webpack_module,exports)=>{eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.resize = void 0;\r\nfunction resize(ele, img, w, h) {\r\n    w = w || 20;\r\n    h = h || w;\r\n    const width = (w > 100 ? 100 : w) || 20;\r\n    const height = (h > 100 ? 100 : h) || w;\r\n    ele.style.width = (img.width * width) / 100 + 'px';\r\n    ele.style.height = (img.height * height) / 100 + 'px';\r\n}\r\nexports.resize = resize;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDguanMiLCJtYXBwaW5ncyI6Ijs7O0FBRUEsU0FBZ0IsTUFBTSxDQUFDLEdBQVEsRUFBRSxHQUFRLEVBQUUsQ0FBZ0IsRUFBRSxDQUFnQjtJQUMzRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNaLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ1gsTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN4QyxNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3hDLEdBQUcsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDO0lBQ25ELEdBQUcsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDO0FBQ3hELENBQUM7QUFQRCx3QkFPQyIsInNvdXJjZXMiOlsid2VicGFjazovL3pvb20tbGVucy8uL3NyYy9zY3JpcHRzL2xlbnMtcmVzaXplLnRzPzJjNmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW1nLCBEaXYgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzaXplKGVsZTogRGl2LCBpbWc6IEltZywgdzogbnVtYmVyIHwgbnVsbCwgaDogbnVtYmVyIHwgbnVsbCkge1xyXG4gIHcgPSB3IHx8IDIwO1xyXG4gIGggPSBoIHx8IHc7XHJcbiAgY29uc3Qgd2lkdGggPSAodyA+IDEwMCA/IDEwMCA6IHcpIHx8IDIwO1xyXG4gIGNvbnN0IGhlaWdodCA9IChoID4gMTAwID8gMTAwIDogaCkgfHwgdztcclxuICBlbGUuc3R5bGUud2lkdGggPSAoaW1nLndpZHRoICogd2lkdGgpIC8gMTAwICsgJ3B4JztcclxuICBlbGUuc3R5bGUuaGVpZ2h0ID0gKGltZy5oZWlnaHQgKiBoZWlnaHQpIC8gMTAwICsgJ3B4JztcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///48\n")},577:(__unused_webpack_module,exports)=>{eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.createZoomWindow = void 0;\r\nfunction createZoomWindow(lens, image) {\r\n    const zoomWindow = document.createElement('div');\r\n    const lensRect = lens.getBoundingClientRect();\r\n    zoomWindow.classList.add('zoom-window');\r\n    document.body.appendChild(zoomWindow);\r\n    zoomWindow.style.position = 'absolute';\r\n    zoomWindow.style.pointerEvents = 'none';\r\n    zoomWindow.style.aspectRatio = lensRect.width + '/' + lensRect.height;\r\n    const rect = zoomWindow.getBoundingClientRect();\r\n    if (rect.width == 0) {\r\n        zoomWindow.style.top = image.offsetTop + 'px';\r\n        zoomWindow.style.left = image.offsetLeft + image.width + 10 + 'px';\r\n        zoomWindow.style.width = image.width / 2 + 'px';\r\n    }\r\n    return zoomWindow;\r\n}\r\nexports.createZoomWindow = createZoomWindow;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTc3LmpzIiwibWFwcGluZ3MiOiI7OztBQUVBLFNBQWdCLGdCQUFnQixDQUFDLElBQW9CLEVBQUUsS0FBVTtJQUMvRCxNQUFNLFVBQVUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO0lBQzlDLFVBQVUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3hDLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3RDLFVBQVUsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBQztJQUN2QyxVQUFVLENBQUMsS0FBSyxDQUFDLGFBQWEsR0FBRyxNQUFNLENBQUM7SUFDeEMsVUFBVSxDQUFDLEtBQUssQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQztJQUV0RSxNQUFNLElBQUksR0FBRyxVQUFVLENBQUMscUJBQXFCLEVBQUUsQ0FBQztJQUNoRCxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxFQUFFO1FBQ25CLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQzlDLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDLEtBQUssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ25FLFVBQVUsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQztLQUNqRDtJQUVELE9BQU8sVUFBVSxDQUFDO0FBQ3BCLENBQUM7QUFqQkQsNENBaUJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9vbS1sZW5zLy4vc3JjL3NjcmlwdHMvem9vbS13aW5kb3cudHM/ZTEyMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbWcgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlWm9vbVdpbmRvdyhsZW5zOiBIVE1MRGl2RWxlbWVudCwgaW1hZ2U6IEltZykge1xyXG4gIGNvbnN0IHpvb21XaW5kb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBjb25zdCBsZW5zUmVjdCA9IGxlbnMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgem9vbVdpbmRvdy5jbGFzc0xpc3QuYWRkKCd6b29tLXdpbmRvdycpO1xyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoem9vbVdpbmRvdyk7XHJcbiAgem9vbVdpbmRvdy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgem9vbVdpbmRvdy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xyXG4gIHpvb21XaW5kb3cuc3R5bGUuYXNwZWN0UmF0aW8gPSBsZW5zUmVjdC53aWR0aCArICcvJyArIGxlbnNSZWN0LmhlaWdodDtcclxuXHJcbiAgY29uc3QgcmVjdCA9IHpvb21XaW5kb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgaWYgKHJlY3Qud2lkdGggPT0gMCkge1xyXG4gICAgem9vbVdpbmRvdy5zdHlsZS50b3AgPSBpbWFnZS5vZmZzZXRUb3AgKyAncHgnO1xyXG4gICAgem9vbVdpbmRvdy5zdHlsZS5sZWZ0ID0gaW1hZ2Uub2Zmc2V0TGVmdCArIGltYWdlLndpZHRoICsgMTAgKyAncHgnO1xyXG4gICAgem9vbVdpbmRvdy5zdHlsZS53aWR0aCA9IGltYWdlLndpZHRoIC8gMiArICdweCc7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gem9vbVdpbmRvdztcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///577\n")}},__webpack_module_cache__={};function __webpack_require__(Q){var U=__webpack_module_cache__[Q];if(void 0!==U)return U.exports;var F=__webpack_module_cache__[Q]={exports:{}};return __webpack_modules__[Q](F,F.exports,__webpack_require__),F.exports}var __webpack_exports__=__webpack_require__(607);return __webpack_exports__})()));